<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Developer Utilities</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tab-container {
            background: #34495e;
            padding: 10px;
        }

        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
        }

        .tab-button {
            background: transparent;
            color: #bdc3c7;
            border: none;
            padding: 12px 18px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            border-radius: 8px 8px 0 0;
            flex: 0 0 auto;
        }

        .tab-button:hover {
            background: rgba(52, 152, 219, 0.1);
            color: #ecf0f1;
        }

        .tab-button.active {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            border-bottom-color: #3498db;
        }

        .tab-content {
            display: none;
            padding: 40px;
        }

        .tab-content.active {
            display: block;
        }

        .utility-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #e1e8ed;
            max-width: 1100px;
            margin: 0 auto;
        }

        .utility-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 14px;
        }

        input, select, textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            font-family: 'Consolas', 'Monaco', monospace;
            background: #fafbfc;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
            background: white;
        }

        textarea {
            resize: vertical;
            min-height: 150px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 15px 25px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
            min-width: 120px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }

        .copy-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
        }

        .copy-btn:hover {
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }

        .generate-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.3);
        }

        .generate-btn:hover {
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }

        .clear-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            box-shadow: 0 6px 20px rgba(243, 156, 18, 0.3);
        }

        .clear-btn:hover {
            box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4);
        }

        .encrypt-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.3);
        }

        .encrypt-btn:hover {
            box-shadow: 0 8px 25px rgba(155, 89, 182, 0.4);
        }

        .decrypt-btn {
            background: linear-gradient(135deg, #1abc9c, #16a085);
            box-shadow: 0 6px 20px rgba(26, 188, 156, 0.3);
        }

        .decrypt-btn:hover {
            box-shadow: 0 8px 25px rgba(26, 188, 156, 0.4);
        }

        .options {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .options select, .options input {
            width: auto;
            min-width: 150px;
        }

        .result-section {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .error {
            color: #e74c3c;
            background: #fdf2f2;
            border-left-color: #e74c3c;
        }

        .success {
            color: #27ae60;
            background: #f0f9f4;
            border-left-color: #27ae60;
        }

        #qrOutput {
            text-align: center;
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        #qrOutput canvas {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .description {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 25px;
            font-style: italic;
        }

        /* Password field styles */
        .password-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .password-input {
            padding-right: 50px;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            background: none;
            border: none;
            color: #7f8c8d;
            cursor: pointer;
            font-size: 18px;
            padding: 0;
            min-width: auto;
            width: auto;
            box-shadow: none;
            z-index: 2;
        }

        .password-toggle:hover {
            color: #3498db;
            transform: none;
            box-shadow: none;
        }

        /* Encryption tab specific styles */
        .encryption-section {
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            background: #fafbfc;
        }

        .encryption-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .qr-encryption-output {
            text-align: center;
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e1e8ed;
        }

        .qr-encryption-output canvas {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-top: 15px;
        }

        .security-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
        }

        .security-notice strong {
            color: #d35400;
        }

        /* Text Statistics Styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* File Upload Styles */
        .file-upload-area {
            border: 2px dashed #3498db;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .file-upload-area:hover {
            background: #e3f2fd;
            border-color: #2980b9;
        }

        .file-upload-area.drag-over {
            background: #e3f2fd;
            border-color: #2980b9;
            transform: scale(1.02);
        }

        .file-info {
            background: #e8f5e8;
            border: 1px solid #27ae60;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            display: none;
        }

        .download-section {
            background: #f0f9ff;
            border: 1px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        /* QR Decoder Styles */
        .qr-section {
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            background: #fafbfc;
        }

        .qr-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .qr-upload-area {
            border: 2px dashed #9b59b6;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            background: #f8f4ff;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .qr-upload-area:hover {
            background: #f0e6ff;
            border-color: #8e44ad;
        }

        .qr-upload-area.drag-over {
            background: #f0e6ff;
            border-color: #8e44ad;
            transform: scale(1.02);
        }

        .qr-preview {
            text-align: center;
            margin: 20px 0;
        }

        .qr-preview img {
            max-width: 300px;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .qr-result {
            background: #e8f5e8;
            border: 1px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            word-break: break-all;
        }

        .qr-result.error {
            background: #fdf2f2;
            border-color: #e74c3c;
            color: #e74c3c;
        }

        /* Animations */
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .utility-card {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            button {
                width: 100%;
            }

            .tab-button {
                padding: 12px 15px;
                font-size: 12px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ†Ô∏è Web Developer Utilities</h1>
            <p>Essential tools for web development - organized and accessible</p>
        </div>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('string-formatter')">String Formatter</button>
                <button class="tab-button" onclick="switchTab('url-encoder')">URL Encoder</button>
                <button class="tab-button" onclick="switchTab('base64')">Base64</button>
                <button class="tab-button" onclick="switchTab('jwt-decoder')">JWT Decoder</button>
                <button class="tab-button" onclick="switchTab('json-formatter')">JSON Formatter</button>
                <button class="tab-button" onclick="switchTab('uuid-generator')">UUID Generator</button>
                <button class="tab-button" onclick="switchTab('time-converter')">Time Converter</button>
                <button class="tab-button" onclick="switchTab('hash-generator')">Hash Generator</button>
                <button class="tab-button" onclick="switchTab('string-escape')">String Escape</button>
                <button class="tab-button" onclick="switchTab('encryption')">Encryption</button>
                <button class="tab-button" onclick="switchTab('qr-generator')">QR Generator</button>
                <button class="tab-button" onclick="switchTab('text-stats')">Text Statistics</button>
                <button class="tab-button" onclick="switchTab('file-base64')">File/Base64</button>
            </div>
        </div>

        <!-- String Formatter Tab -->
        <div id="string-formatter" class="tab-content active">
            <div class="utility-card">
                <h3 class="utility-title">String Formatter</h3>
                <p class="description">Convert escape characters like \n, \t into proper formatting</p>
                <div class="form-group">
                    <label>Input String:</label>
                    <textarea id="stringInput" placeholder="Enter string with escape characters like \n, \t, \r, \\"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="formatString()">Format String</button>
                    <button class="copy-btn" onclick="copyToClipboard('stringOutput', this)">Copy Output</button>
                </div>
                <div class="form-group">
                    <label>Output:</label>
                    <textarea id="stringOutput" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- URL Encoder Tab -->
        <div id="url-encoder" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">URL Encoder/Decoder</h3>
                <p class="description">Encode and decode URLs with different methods</p>
                <div class="options">
                    <select id="urlMethod">
                        <option value="encodeURIComponent">encodeURIComponent</option>
                        <option value="encodeURI">encodeURI</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Input URL:</label>
                    <textarea id="urlInput" placeholder="Enter URL to encode/decode"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="encodeUrl()">Encode</button>
                    <button onclick="decodeUrl()">Decode</button>
                    <button class="copy-btn" onclick="copyToClipboard('urlOutput', this)">Copy Output</button>
                </div>
                <div class="form-group">
                    <label>Output:</label>
                    <textarea id="urlOutput" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- Base64 Tab -->
        <div id="base64" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">Base64 Encoder/Decoder</h3>
                <p class="description">Encode and decode text using Base64 encoding</p>
                <div class="form-group">
                    <label>Input:</label>
                    <textarea id="base64Input" placeholder="Enter text to encode/decode"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="encodeBase64()">Encode</button>
                    <button onclick="decodeBase64()">Decode</button>
                    <button class="copy-btn" onclick="copyToClipboard('base64Output', this)">Copy Output</button>
                </div>
                <div class="form-group">
                    <label>Output:</label>
                    <textarea id="base64Output" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- JWT Decoder Tab -->
        <div id="jwt-decoder" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">JWT Token Decoder</h3>
                <p class="description">Decode JWT tokens to view header and payload</p>
                <div class="form-group">
                    <label>JWT Token:</label>
                    <textarea id="jwtInput" placeholder="Enter JWT token (eyJ...)"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="decodeJWT()">Decode JWT</button>
                    <button class="copy-btn" onclick="copyToClipboard('jwtOutput', this)">Copy Output</button>
                </div>
                <div class="form-group">
                    <label>Decoded JWT:</label>
                    <textarea id="jwtOutput" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- JSON Formatter Tab -->
        <div id="json-formatter" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">JSON Formatter</h3>
                <p class="description">Format, validate, and minify JSON data</p>
                <div class="options">
                    <select id="jsonIndent">
                        <option value="4">4 spaces</option>
                        <option value="2">2 spaces</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>JSON Input:</label>
                    <textarea id="jsonInput" placeholder="Enter JSON to format/minify"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="formatJson()">Format JSON</button>
                    <button onclick="minifyJson()">Minify JSON</button>
                    <button class="copy-btn" onclick="copyToClipboard('jsonOutput', this)">Copy Output</button>
                </div>
                <div class="form-group">
                    <label>Output:</label>
                    <textarea id="jsonOutput" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- UUID Generator Tab -->
        <div id="uuid-generator" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">UUID/GUID Generator</h3>
                <p class="description">Generate RFC 4122 compliant UUIDs</p>
                <div class="form-group">
                    <label>Generated UUID:</label>
                    <input type="text" id="uuidOutput" readonly>
                </div>
                <div class="button-group">
                    <button class="generate-btn" onclick="generateUUID()">Generate New UUID</button>
                    <button class="copy-btn" onclick="copyToClipboard('uuidOutput', this)">Copy UUID</button>
                </div>
            </div>
        </div>

        <!-- Time Converter Tab -->
        <div id="time-converter" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">Unix/Epoch Time Converter</h3>
                <p class="description">Convert between human-readable dates and Unix timestamps</p>
                <div class="form-group">
                    <label>Date & Time:</label>
                    <input type="datetime-local" id="dateTimeInput">
                </div>
                <div class="form-group">
                    <label>Unix Timestamp:</label>
                    <input type="number" id="unixInput" placeholder="Enter unix timestamp">
                </div>
                <div class="button-group">
                    <button onclick="dateToUnix()">Date ‚Üí Unix</button>
                    <button onclick="unixToDate()">Unix ‚Üí Date</button>
                    <button class="generate-btn" onclick="currentTime()">Current Time</button>
                </div>
            </div>
        </div>

        <!-- Hash Generator Tab -->
        <div id="hash-generator" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">Hash Generator</h3>
                <p class="description">Generate cryptographic hashes using various algorithms</p>
                <div class="options">
                    <select id="hashAlgorithm">
                        <option value="md5">MD5</option>
                        <option value="sha1">SHA1</option>
                        <option value="sha256">SHA256</option>
                        <option value="sha512">SHA512</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Input String:</label>
                    <textarea id="hashInput" placeholder="Enter text to hash"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="generateHash()">Generate Hash</button>
                    <button class="copy-btn" onclick="copyToClipboard('hashOutput', this)">Copy Hash</button>
                </div>
                <div class="form-group">
                    <label>Hash Output:</label>
                    <textarea id="hashOutput" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- String Escape Tab -->
        <div id="string-escape" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">String Escape/Unescape</h3>
                <p class="description">Escape or unescape strings with quotes and special characters</p>
                <div class="options">
                    <select id="quoteType">
                        <option value="single">Single Quote (')</option>
                        <option value="double">Double Quote (")</option>
                    </select>
                    <input type="text" id="escapeChar" placeholder="Escape char" value="\" maxlength="1" style="width: 100px;">
                </div>
                <div class="form-group">
                    <label>Input String:</label>
                    <textarea id="escapeInput" placeholder="Enter string to escape/unescape"></textarea>
                </div>
                <div class="button-group">
                    <button onclick="escapeString()">Escape</button>
                    <button onclick="unescapeString()">Unescape</button>
                    <button class="copy-btn" onclick="copyToClipboard('escapeOutput', this)">Copy Output</button>
                </div>
                <div class="form-group">
                    <label>Output:</label>
                    <textarea id="escapeOutput" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- Encryption Tab -->
        <div id="encryption" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">üîê AES Encryption & Decryption</h3>
                <p class="description">Secure symmetric encryption using AES-256-CBC with password-based key derivation</p>

                <div class="security-notice">
                    <strong>üîí Security Notice:</strong> This tool uses AES-256-CBC encryption with PBKDF2 key derivation. 
                    Your password is stored locally in your browser and never transmitted. Use strong, unique passwords for maximum security.
                </div>
                
                <!-- Password Section -->
                <div class="encryption-section">
                    <h4>üîë Password Configuration</h4>
                    <div class="form-group">
                        <label>Encryption Password:</label>
                        <div class="password-container">
                            <input type="password" id="encryptionPassword" class="password-input" placeholder="Enter your encryption password">
                            <button type="button" class="password-toggle" onclick="togglePasswordVisibility()" title="Show/Hide Password">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="generate-btn" onclick="generateRandomPassword()">Generate Random Password</button>
                        <button onclick="savePassword()">Save Password</button>
                        <button class="clear-btn" onclick="clearPassword()">Clear Password</button>
                    </div>
                </div>

                <!-- Encryption Section -->
                <div class="encryption-section">
                    <h4>üîí Encrypt Text</h4>
                    <div class="form-group">
                        <label>Plain Text:</label>
                        <textarea id="plainText" placeholder="Enter text to encrypt"></textarea>
                    </div>
                    <div class="button-group">
                        <button class="encrypt-btn" onclick="encryptText()">Encrypt Text</button>
                        <button class="copy-btn" onclick="copyToClipboard('encryptedText', this)">Copy Encrypted</button>
                    </div>
                    <div class="form-group">
                        <label>Encrypted Text:</label>
                        <textarea id="encryptedText" readonly placeholder="Encrypted text will appear here"></textarea>
                    </div>

                    <!-- QR Code for Encrypted Text -->
                    <div id="encryptedQROutput" class="qr-encryption-output" style="display: none;">
                        <h4 style="color: #2c3e50; margin-bottom: 15px;">üì± QR Code for Encrypted Text</h4>
                        <p style="color: #7f8c8d; margin-bottom: 15px;">Scan this QR code to share the encrypted text</p>
                    </div>
                </div>

                <!-- Decryption Section -->
                <div class="encryption-section">
                    <h4>üîì Decrypt Text</h4>
                    <div class="form-group">
                        <label>Encrypted Text:</label>
                        <textarea id="encryptedTextInput" placeholder="Enter encrypted text to decrypt"></textarea>
                    </div>
                    <div class="button-group">
                        <button class="decrypt-btn" onclick="decryptText()">Decrypt Text</button>
                        <button class="copy-btn" onclick="copyToClipboard('decryptedText', this)">Copy Decrypted</button>
                    </div>
                    <div class="form-group">
                        <label>Decrypted Text:</label>
                        <textarea id="decryptedText" readonly placeholder="Decrypted text will appear here"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- QR Generator Tab -->
        <div id="qr-generator" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">QR Code Generator & Decoder</h3>
                <p class="description">Generate QR codes from text or decode QR codes from images</p>
                
                <!-- QR Code Generator Section -->
                <div class="qr-section">
                    <h4>üéØ Generate QR Code</h4>
                    <div class="form-group">
                        <label>Text for QR Code:</label>
                        <textarea id="qrInput" placeholder="Enter text to generate QR code"></textarea>
                    </div>
                    <div class="button-group">
                        <button onclick="generateQR()">Generate QR Code</button>
                    </div>
                    <div id="qrOutput"></div>
                </div>

                <hr style="margin: 30px 0; border: none; border-top: 2px solid #e1e8ed;">

                <!-- QR Code Decoder Section -->
                <div class="qr-section">
                    <h4>üîç Decode QR Code from Image</h4>
                    <div class="form-group">
                        <label>Upload QR Code Image:</label>
                        <div class="qr-upload-area" id="qrUploadArea" onclick="document.getElementById('qrImageInput').click()">
                            <div style="font-size: 48px; margin-bottom: 15px;">üì±</div>
                            <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">Click to select QR code image or drag & drop</div>
                            <div style="color: #7f8c8d;">Supports PNG, JPG, JPEG, GIF, BMP formats</div>
                        </div>
                        <input type="file" id="qrImageInput" accept="image/*" style="display: none;" onchange="handleQRImageUpload(event)">
                    </div>

                    <div id="qrPreview" class="qr-preview" style="display: none;">
                        <img id="qrPreviewImage" alt="QR Code Preview">
                    </div>

                    <div class="button-group">
                        <button onclick="decodeQRImage()" id="decodeBtn" disabled>Decode QR Code</button>
                        <button class="clear-btn" onclick="clearQRDecoder()">Clear</button>
                    </div>

                    <div id="qrDecodeResult" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Text Statistics Tab -->
        <div id="text-stats" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">Text Statistics</h3>
                <p class="description">Real-time character, word, and line counting</p>
                <div class="form-group">
                    <label>Input Text:</label>
                    <textarea id="textStatsInput" placeholder="Type or paste your text here..." oninput="updateTextStats()"></textarea>
                </div>
                <div class="button-group">
                    <button class="clear-btn" onclick="clearTextStats()">Clear Text</button>
                    <button class="copy-btn" onclick="copyToClipboard('textStatsInput', this)">Copy Text</button>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="charCount">0</div>
                        <div class="stat-label">Characters</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="charCountNoSpaces">0</div>
                        <div class="stat-label">Characters (no spaces)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="wordCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="lineCount">0</div>
                        <div class="stat-label">Lines</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="paragraphCount">0</div>
                        <div class="stat-label">Paragraphs</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- File/Base64 Converter Tab -->
        <div id="file-base64" class="tab-content">
            <div class="utility-card">
                <h3 class="utility-title">File ‚Üî Base64 Converter</h3>
                <p class="description">Convert files to Base64 text and Base64 text back to files</p>
                
                <div class="form-group">
                    <label>Upload File to Convert to Base64:</label>
                    <div class="file-upload-area" id="fileUploadArea" onclick="document.getElementById('fileInput').click()">
                        <div style="font-size: 48px; margin-bottom: 15px;">üìÅ</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">Click to select file or drag & drop</div>
                        <div style="color: #7f8c8d;">Supports all file types</div>
                    </div>
                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileUpload(event)">
                    <div id="fileInfo" class="file-info">
                        <strong>File:</strong> <span id="fileName"></span><br>
                        <strong>Size:</strong> <span id="fileSize"></span><br>
                        <strong>Type:</strong> <span id="fileType"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Base64 Output:</label>
                    <textarea id="base64FileOutput" readonly placeholder="Base64 encoded file will appear here..."></textarea>
                </div>

                <div class="button-group">
                    <button class="copy-btn" onclick="copyToClipboard('base64FileOutput', this)">Copy Base64</button>
                    <button class="clear-btn" onclick="clearFileConversion()">Clear</button>
                </div>

                <hr style="margin: 40px 0; border: none; border-top: 2px solid #e1e8ed;">

                <div class="form-group">
                    <label>Base64 Text to Convert to File:</label>
                    <textarea id="base64ToFileInput" placeholder="Paste Base64 encoded text here..."></textarea>
                </div>

                <div class="form-group">
                    <label>Output Filename:</label>
                    <input type="text" id="outputFileName" placeholder="Enter filename with extension (e.g., document.pdf, image.png)">
                </div>

                <div class="button-group">
                    <button onclick="convertBase64ToFile()">Convert to File</button>
                    <button class="clear-btn" onclick="clearBase64ToFile()">Clear</button>
                </div>

                <div id="downloadSection" class="download-section" style="display: none;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">File Ready for Download</h4>
                    <button id="downloadBtn" class="generate-btn">Download File</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsqr/1.4.0/jsQR.js"></script>

    <!--<script src="scripts/crypto-js.min.js"></script>
    <script src="scripts/qrious.min.js"></script>
    <script src="scripts/jsQR.js"></script>-->

    <script>
        // Global variables for QR decoding and encryption
        let qrImageFile = null;
        let passwordVisible = false;

        // Tab Switching
        function switchTab(tabId) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked tab button
            event.target.classList.add('active');
        }

        // Encryption Functions
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('encryptionPassword');
            const toggleButton = document.querySelector('.password-toggle');
            
            passwordVisible = !passwordVisible;
            passwordInput.type = passwordVisible ? 'text' : 'password';
            toggleButton.textContent = passwordVisible ? 'üôà' : 'üëÅÔ∏è';
            toggleButton.title = passwordVisible ? 'Hide Password' : 'Show Password';
        }

        function generateRandomPassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';
            let password = '';
            for (let i = 0; i < 16; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('encryptionPassword').value = password;
        }

        function savePassword() {
            const password = document.getElementById('encryptionPassword').value;
            if (!password) {
                alert('Please enter a password first');
                return;
            }
            
            try {
                localStorage.setItem('encryptionPassword', password);
                showNotification('Password saved to local storage', 'success');
            } catch (e) {
                alert('Failed to save password: ' + e.message);
            }
        }

        function clearPassword() {
            document.getElementById('encryptionPassword').value = '';
            try {
                localStorage.removeItem('encryptionPassword');
                showNotification('Password cleared from local storage', 'success');
            } catch (e) {
                alert('Failed to clear password: ' + e.message);
            }
        }

        function loadSavedPassword() {
            try {
                const savedPassword = localStorage.getItem('encryptionPassword');
                if (savedPassword) {
                    document.getElementById('encryptionPassword').value = savedPassword;
                }
            } catch (e) {
                console.error('Failed to load saved password:', e);
            }
        }

        function encryptText() {
            const plaintext = document.getElementById('plainText').value;
            const password = document.getElementById('encryptionPassword').value;
            
            if (!plaintext) {
                alert('Please enter text to encrypt');
                return;
            }
            
            if (!password) {
                alert('Please enter an encryption password');
                return;
            }
            
            try {
                // Generate random salt and IV
                const salt = CryptoJS.lib.WordArray.random(256/8);
                const iv = CryptoJS.lib.WordArray.random(128/8);
                
                // Derive key using PBKDF2
                const key = CryptoJS.PBKDF2(password, salt, {
                    keySize: 256/32,
                    iterations: 10000
                });
                
                // Encrypt using AES-CBC
                const encrypted = CryptoJS.AES.encrypt(plaintext, key, {
                    iv: iv,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });
                
                // Combine salt, iv, and encrypted data
                const encryptedData = {
                    salt: salt.toString(),
                    iv: iv.toString(),
                    encrypted: encrypted.toString()
                };
                
                const encryptedText = btoa(JSON.stringify(encryptedData));
                document.getElementById('encryptedText').value = encryptedText;
                
                // Generate QR code for encrypted text
                generateEncryptedQR(encryptedText);
                
                showNotification('Text encrypted successfully', 'success');
            } catch (e) {
                alert('Encryption failed: ' + e.message);
            }
        }

        function decryptText() {
            const encryptedInput = document.getElementById('encryptedTextInput').value;
            const password = document.getElementById('encryptionPassword').value;
            
            if (!encryptedInput) {
                alert('Please enter encrypted text to decrypt');
                return;
            }
            
            if (!password) {
                alert('Please enter the decryption password');
                return;
            }
            
            try {
                // Parse encrypted data
                const encryptedData = JSON.parse(atob(encryptedInput));
                const salt = CryptoJS.enc.Hex.parse(encryptedData.salt);
                const iv = CryptoJS.enc.Hex.parse(encryptedData.iv);
                
                // Derive key using PBKDF2
                const key = CryptoJS.PBKDF2(password, salt, {
                    keySize: 256/32,
                    iterations: 10000
                });
                
                // Decrypt
                const decrypted = CryptoJS.AES.decrypt(encryptedData.encrypted, key, {
                    iv: iv,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });
                
                const decryptedText = decrypted.toString(CryptoJS.enc.Utf8);
                
                if (!decryptedText) {
                    throw new Error('Invalid password or corrupted data');
                }
                
                document.getElementById('decryptedText').value = decryptedText;
                showNotification('Text decrypted successfully', 'success');
            } catch (e) {
                alert('Decryption failed: ' + e.message);
                document.getElementById('decryptedText').value = '';
            }
        }

        function generateEncryptedQR(encryptedText) {
            if (!encryptedText) return;
            
            try {
                const canvas = document.createElement('canvas');
                const qr = new QRious({
                    element: canvas,
                    value: encryptedText,
                    size: 512,
                    foreground: '#8e44ad',
                    background: '#ffffff'
                });

                const output = document.getElementById('encryptedQROutput');
                // Clear previous QR code
                const existingCanvas = output.querySelector('canvas');
                if (existingCanvas) {
                    existingCanvas.remove();
                }
                
                output.appendChild(canvas);
                output.style.display = 'block';
            } catch (e) {
                console.error('QR generation failed:', e);
            }
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `result-section ${type}`;
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '1000';
            notification.style.minWidth = '300px';
            notification.style.animation = 'slideIn 0.3s ease-out';
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // String Formatter
        function formatString() {
            const input = document.getElementById('stringInput').value;
            const output = input
                .replace(/\\n/g, '\n')
                .replace(/\\t/g, '\t')
                .replace(/\\r/g, '\r')
                .replace(/\\\\/g, '\\');
            document.getElementById('stringOutput').value = output;
        }

        // URL Encoder/Decoder
        function encodeUrl() {
            const input = document.getElementById('urlInput').value;
            const method = document.getElementById('urlMethod').value;
            try {
                const output = method === 'encodeURI' ? encodeURI(input) : encodeURIComponent(input);
                document.getElementById('urlOutput').value = output;
            } catch (e) {
                document.getElementById('urlOutput').value = 'Error: ' + e.message;
            }
        }

        function decodeUrl() {
            const input = document.getElementById('urlInput').value;
            try {
                const output = decodeURIComponent(input);
                document.getElementById('urlOutput').value = output;
            } catch (e) {
                document.getElementById('urlOutput').value = 'Error: ' + e.message;
            }
        }

        // Base64 Encoder/Decoder
        function encodeBase64() {
            const input = document.getElementById('base64Input').value;
            try {
                const output = btoa(unescape(encodeURIComponent(input)));
                document.getElementById('base64Output').value = output;
            } catch (e) {
                document.getElementById('base64Output').value = 'Error: ' + e.message;
            }
        }

        function decodeBase64() {
            const input = document.getElementById('base64Input').value;
            try {
                const output = decodeURIComponent(escape(atob(input)));
                document.getElementById('base64Output').value = output;
            } catch (e) {
                document.getElementById('base64Output').value = 'Error: ' + e.message;
            }
        }

        // JWT Decoder
        function decodeJWT() {
            const token = document.getElementById('jwtInput').value.trim();
            try {
                const parts = token.split('.');
                if (parts.length !== 3) {
                    throw new Error('Invalid JWT format');
                }

                const header = JSON.parse(atob(parts[0]));
                const payload = JSON.parse(atob(parts[1]));
                
                const result = {
                    header: header,
                    payload: payload,
                    signature: parts[2]
                };

                document.getElementById('jwtOutput').value = JSON.stringify(result, null, 4);
            } catch (e) {
                document.getElementById('jwtOutput').value = 'Error: ' + e.message;
            }
        }

        // JSON Formatter
        function formatJson() {
            const input = document.getElementById('jsonInput').value;
            const indent = parseInt(document.getElementById('jsonIndent').value);
            try {
                const parsed = JSON.parse(input);
                const output = JSON.stringify(parsed, null, indent);
                document.getElementById('jsonOutput').value = output;
            } catch (e) {
                document.getElementById('jsonOutput').value = 'Error: ' + e.message;
            }
        }

        function minifyJson() {
            const input = document.getElementById('jsonInput').value;
            try {
                const parsed = JSON.parse(input);
                const output = JSON.stringify(parsed);
                document.getElementById('jsonOutput').value = output;
            } catch (e) {
                document.getElementById('jsonOutput').value = 'Error: ' + e.message;
            }
        }

        // UUID Generator
        function generateUUID() {
            const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
            document.getElementById('uuidOutput').value = uuid;
        }

        // Unix Time Converter
        function dateToUnix() {
            const dateInput = document.getElementById('dateTimeInput').value;
            if (!dateInput) {
                alert('Please select a date and time');
                return;
            }
            const timestamp = Math.floor(new Date(dateInput).getTime() / 1000);
            document.getElementById('unixInput').value = timestamp;
        }

        function unixToDate() {
            const unix = document.getElementById('unixInput').value;
            if (!unix) {
                alert('Please enter a unix timestamp');
                return;
            }
            const date = new Date(parseInt(unix) * 1000);
            const isoString = date.toISOString().slice(0, 16);
            document.getElementById('dateTimeInput').value = isoString;
        }

        function currentTime() {
            const now = new Date();
            const timestamp = Math.floor(now.getTime() / 1000);
            const isoString = now.toISOString().slice(0, 16);
            
            document.getElementById('unixInput').value = timestamp;
            document.getElementById('dateTimeInput').value = isoString;
        }

        // Hash Generator
        function generateHash() {
            const input = document.getElementById('hashInput').value;
            const algorithm = document.getElementById('hashAlgorithm').value;
            
            if (!input) {
                alert('Please enter text to hash');
                return;
            }

            let hash;
            switch (algorithm) {
                case 'md5':
                    hash = CryptoJS.MD5(input).toString();
                    break;
                case 'sha1':
                    hash = CryptoJS.SHA1(input).toString();
                    break;
                case 'sha256':
                    hash = CryptoJS.SHA256(input).toString();
                    break;
                case 'sha512':
                    hash = CryptoJS.SHA512(input).toString();
                    break;
                default:
                    alert('Unsupported hash algorithm');
                    return;
            }
            
            document.getElementById('hashOutput').value = `${algorithm.toUpperCase()}: ${hash}`;
        }

        // String Escape/Unescape
        function escapeString() {
            const input = document.getElementById('escapeInput').value;
            const quoteType = document.getElementById('quoteType').value;
            const escapeChar = document.getElementById('escapeChar').value || '\\';
            
            const quote = quoteType === 'single' ? "'" : '"';
            const escaped = input
                .replace(new RegExp('\\' + escapeChar, 'g'), escapeChar + escapeChar)
                .replace(new RegExp('\\' + quote, 'g'), escapeChar + quote);
            
            document.getElementById('escapeOutput').value = escaped;
        }

        function unescapeString() {
            const input = document.getElementById('escapeInput').value;
            const quoteType = document.getElementById('quoteType').value;
            const escapeChar = document.getElementById('escapeChar').value || '\\';
            
            const quote = quoteType === 'single' ? "'" : '"';
            const unescaped = input
                .replace(new RegExp('\\' + escapeChar + quote, 'g'), quote)
                .replace(new RegExp('\\' + escapeChar + '\\' + escapeChar, 'g'), escapeChar);
            
            document.getElementById('escapeOutput').value = unescaped;
        }

        // QR Code Generator
        function generateQR() {
            const input = document.getElementById('qrInput').value;
            if (!input) {
                alert('Please enter text for QR code');
                return;
            }

            const canvas = document.createElement('canvas');
            const qr = new QRious({
                element: canvas,
                value: input,
                size: 512,
                foreground: '#2c3e50',
                background: '#ffffff'
            });

            const output = document.getElementById('qrOutput');
            output.innerHTML = '<h4 style="margin-bottom: 15px; color: #2c3e50;">Generated QR Code:</h4>';
            output.appendChild(canvas);
        }

        // QR Code Decoder Functions
        function setupQRDragAndDrop() {
            const uploadArea = document.getElementById('qrUploadArea');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => uploadArea.classList.add('drag-over'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => uploadArea.classList.remove('drag-over'), false);
            });

            uploadArea.addEventListener('drop', handleQRDrop, false);
        }

        function handleQRDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            
            if (files.length > 0) {
                handleQRImageUpload({ target: { files: files } });
            }
        }

        function handleQRImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file type
            if (!file.type.startsWith('image/')) {
                alert('Please select a valid image file');
                return;
            }

            qrImageFile = file;
            
            // Show preview
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('qrPreview');
                const previewImage = document.getElementById('qrPreviewImage');
                
                previewImage.src = e.target.result;
                preview.style.display = 'block';
                
                // Enable decode button
                document.getElementById('decodeBtn').disabled = false;
                
                // Clear previous results
                document.getElementById('qrDecodeResult').style.display = 'none';
            };
            reader.readAsDataURL(file);
        }

        function decodeQRImage() {
            if (!qrImageFile) {
                alert('Please upload a QR code image first');
                return;
            }

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();

            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);

                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const code = jsQR(imageData.data, imageData.width, imageData.height);

                const resultDiv = document.getElementById('qrDecodeResult');
                
                if (code) {
                    // Store the decoded data globally for copying
                    window.currentQRData = code.data;
                    
                    resultDiv.innerHTML = `
                        <div class="qr-result">
                            <h4 style="color: #27ae60; margin-bottom: 15px;">‚úÖ QR Code Decoded Successfully!</h4>
                            <strong>Decoded Value:</strong><br>
                            <textarea id="qrDecodedText" readonly style="width: 100%; margin-top: 10px; padding: 15px; border: 1px solid #27ae60; border-radius: 8px; background: #f8fff8;" rows="4">${code.data.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</textarea>
                            <div style="margin-top: 15px;">
                                <button class="copy-btn" onclick="copyQRDecodedText(this)">Copy Decoded Text</button>
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="qr-result error">
                            <h4 style="margin-bottom: 15px;">‚ùå No QR Code Found</h4>
                            <p>Could not detect a valid QR code in the uploaded image. Please try:</p>
                            <ul style="margin: 10px 0; padding-left: 25px;">
                                <li>Using a clearer image</li>
                                <li>Ensuring the QR code is fully visible</li>
                                <li>Checking the image isn't rotated or distorted</li>
                                <li>Using better lighting in the photo</li>
                            </ul>
                        </div>
                    `;
                }
                
                resultDiv.style.display = 'block';
            };

            img.src = URL.createObjectURL(qrImageFile);
        }

        function copyQRDecodedText(buttonElement) {
            const text = window.currentQRData || '';
            if (!text) {
                alert('No decoded text to copy');
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                // Provide visual feedback on the button
                const button = buttonElement;
                const originalText = button.textContent;
                button.textContent = 'Copied! ‚úì';
                button.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 1500);
            }).catch(err => {
                alert('Failed to copy: ' + err);
            });
        }

        function clearQRDecoder() {
            document.getElementById('qrImageInput').value = '';
            document.getElementById('qrPreview').style.display = 'none';
            document.getElementById('qrDecodeResult').style.display = 'none';
            document.getElementById('decodeBtn').disabled = true;
            qrImageFile = null;
            window.currentQRData = null; // Clear the stored QR data
        }

        // Text Statistics Functions
        function updateTextStats() {
            const text = document.getElementById('textStatsInput').value;
            
            // Character count
            const charCount = text.length;
            document.getElementById('charCount').textContent = charCount.toLocaleString();
            
            // Character count without spaces
            const charCountNoSpaces = text.replace(/\s/g, '').length;
            document.getElementById('charCountNoSpaces').textContent = charCountNoSpaces.toLocaleString();
            
            // Word count
            const words = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            document.getElementById('wordCount').textContent = words.toLocaleString();
            
            // Line count
            const lines = text === '' ? 0 : text.split('\n').length;
            document.getElementById('lineCount').textContent = lines.toLocaleString();
            
            // Paragraph count (empty lines separate paragraphs)
            const paragraphs = text.trim() === '' ? 0 : text.trim().split(/\n\s*\n/).length;
            document.getElementById('paragraphCount').textContent = paragraphs.toLocaleString();
        }

        function clearTextStats() {
            document.getElementById('textStatsInput').value = '';
            updateTextStats();
        }

        // File/Base64 Converter Functions
        let currentFileData = null;

        // Setup drag and drop
        function setupDragAndDrop() {
            const uploadArea = document.getElementById('fileUploadArea');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => uploadArea.classList.add('drag-over'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => uploadArea.classList.remove('drag-over'), false);
            });

            uploadArea.addEventListener('drop', handleDrop, false);
        }

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            
            if (files.length > 0) {
                handleFileUpload({ target: { files: files } });
            }
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Show file info
            document.getElementById('fileName').textContent = file.name;
            document.getElementById('fileSize').textContent = formatFileSize(file.size);
            document.getElementById('fileType').textContent = file.type || 'Unknown';
            document.getElementById('fileInfo').style.display = 'block';

            // Convert to Base64
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result.split(',')[1]; // Remove data URL prefix
                document.getElementById('base64FileOutput').value = base64;
                currentFileData = {
                    name: file.name,
                    type: file.type,
                    size: file.size,
                    base64: base64
                };
            };
            reader.readAsDataURL(file);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function clearFileConversion() {
            document.getElementById('fileInput').value = '';
            document.getElementById('base64FileOutput').value = '';
            document.getElementById('fileInfo').style.display = 'none';
            currentFileData = null;
        }

        function convertBase64ToFile() {
            const base64Input = document.getElementById('base64ToFileInput').value.trim();
            const fileName = document.getElementById('outputFileName').value.trim();

            if (!base64Input) {
                alert('Please enter Base64 text');
                return;
            }

            if (!fileName) {
                alert('Please enter a filename with extension');
                return;
            }

            try {
                // Remove any data URL prefix if present
                const base64Data = base64Input.replace(/^data:[^;]+;base64,/, '');
                
                // Convert base64 to blob
                const byteCharacters = atob(base64Data);
                const byteNumbers = new Array(byteCharacters.length);
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray]);

                // Create download link
                const url = URL.createObjectURL(blob);
                const downloadBtn = document.getElementById('downloadBtn');
                
                downloadBtn.onclick = function() {
                    try {
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = fileName;
                        a.style.display = 'none';
                        document.body.appendChild(a);
                        a.click();
                        
                        // Clean up after a delay to ensure download starts
                        setTimeout(() => {
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                        }, 100);
                    } catch (error) {
                        console.error('Download failed:', error);
                        alert('Download failed. Your browser may have blocked the download.');
                    }
                };

                document.getElementById('downloadSection').style.display = 'block';
            } catch (e) {
                alert('Error converting Base64: ' + e.message);
            }
        }

        function clearBase64ToFile() {
            document.getElementById('base64ToFileInput').value = '';
            document.getElementById('outputFileName').value = '';
            document.getElementById('downloadSection').style.display = 'none';
        }

        // Copy to Clipboard
        function copyToClipboard(elementId, buttonElement = null) {
            const element = document.getElementById(elementId);
            if (element.value || element.textContent) {
                const text = element.value || element.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    // Visual feedback
                    const button = buttonElement || event.target;
                    if (button) {
                        const originalText = button.textContent;
                        button.textContent = 'Copied! ‚úì';
                        button.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
                        
                        setTimeout(() => {
                            button.textContent = originalText;
                            button.style.background = '';
                        }, 1500);
                    }
                }).catch(err => {
                    alert('Failed to copy: ' + err);
                });
            } else {
                alert('Nothing to copy');
            }
        }

        // Initialize on load
        window.addEventListener('load', () => {
            currentTime();
            generateUUID();
            updateTextStats();
            setupDragAndDrop();
            setupQRDragAndDrop();
            loadSavedPassword(); // Load saved encryption password
        });
    </script>
</body>
</html>